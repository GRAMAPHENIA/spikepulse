<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spikepulse - Domina la Gravedad</title>
    <meta name="description" content="Spikepulse: Un emocionante juego de plataformas donde controlas un cubo a través de obstáculos peligrosos usando mecánicas avanzadas como salto doble, dash y gravedad invertida.">
    <meta name="keywords" content="juego, plataformas, español, spikepulse, geometry dash, salto, gravedad">
    
    <!-- Preload de fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Estilos principales -->
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/components/screens.css">
    <link rel="stylesheet" href="src/styles/components/hud.css">
    <link rel="stylesheet" href="src/styles/components/buttons.css">
    <link rel="stylesheet" href="src/styles/components/settings.css">
    <link rel="stylesheet" href="src/styles/themes/noir.css">
</head>
<body class="spikepulse-app">
    <!-- Pantalla de carga -->
    <div id="loading-screen" class="sp-screen sp-screen--loading" role="status" aria-label="Cargando juego">
        <div class="loading-content">
            <h1 class="loading-title">Spikepulse</h1>
            <div class="loading-spinner" aria-hidden="true"></div>
            <p class="loading-text">Cargando...</p>
        </div>
    </div>

    <!-- Pantalla de menú principal -->
    <div id="menu-screen" class="sp-screen sp-screen--menu hidden" role="main">
        <header class="menu-header">
            <h1 class="game-title">Spikepulse</h1>
            <p class="game-subtitle">Domina la Gravedad</p>
        </header>
        
        <nav class="menu-nav" role="navigation" aria-label="Menú principal">
            <button id="start-game-btn" class="sp-btn sp-btn--primary" aria-describedby="start-game-help">
                Comenzar Aventura
            </button>
            <button id="continue-game-btn" class="sp-btn sp-btn--secondary hidden" aria-describedby="continue-game-help">
                Continuar
            </button>
            <button id="records-btn" class="sp-btn sp-btn--secondary">
                Récords
            </button>
            <button id="settings-btn" class="sp-btn sp-btn--secondary">
                Configuración
            </button>
        </nav>
        
        <!-- Textos de ayuda para accesibilidad -->
        <div id="start-game-help" class="sr-only">
            Iniciar una nueva partida de Spikepulse
        </div>
        <div id="continue-game-help" class="sr-only">
            Continuar la partida guardada
        </div>
    </div>

    <!-- Pantalla de juego -->
    <div id="playing-screen" class="sp-screen sp-screen--playing hidden">
        <main class="game-main" role="main" aria-label="Área de juego principal">
            <canvas id="game-canvas" 
                    class="spikepulse-canvas"
                    width="1200" 
                    height="600"
                    aria-label="Canvas del juego Spikepulse"
                    role="img">
                Tu navegador no soporta canvas. Por favor actualiza tu navegador para jugar Spikepulse.
            </canvas>
        </main>
        
        <!-- HUD del juego -->
        <aside class="sp-hud" role="complementary" aria-label="Estadísticas del juego">
            <div class="hud-stats">
                <div class="stat-item">
                    <span class="stat-label">Distancia</span>
                    <span class="stat-value" id="distance-display" aria-live="polite">0m</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Saltos</span>
                    <span class="stat-value" id="jumps-display" aria-live="polite">2</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Dash</span>
                    <span class="stat-value" id="dash-display" aria-live="polite">Disponible</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Gravedad</span>
                    <span class="stat-value" id="gravity-display" aria-live="polite">Normal</span>
                </div>
            </div>
            
            <div class="hud-controls">
                <button id="pause-btn" class="sp-control-btn" aria-label="Pausar juego (Escape)">
                    <span class="btn-icon" aria-hidden="true">⏸</span>
                    <span class="btn-text">Pausa</span>
                </button>
            </div>
        </aside>
    </div>

    <!-- Pantalla de pausa -->
    <div id="paused-screen" class="sp-screen sp-screen--paused hidden" role="dialog" aria-labelledby="pause-title">
        <div class="pause-content">
            <h2 id="pause-title" class="pause-title">Pausado</h2>
            <nav class="pause-nav" role="navigation">
                <button id="resume-btn" class="sp-btn sp-btn--primary">
                    Reanudar
                </button>
                <button id="restart-btn" class="sp-btn sp-btn--secondary">
                    Reiniciar
                </button>
                <button id="menu-btn" class="sp-btn sp-btn--secondary">
                    Volver al Menú
                </button>
            </nav>
        </div>
    </div>

    <!-- Pantalla de game over -->
    <div id="gameover-screen" class="sp-screen sp-screen--gameover hidden" role="dialog" aria-labelledby="gameover-title">
        <div class="gameover-content">
            <h2 id="gameover-title" class="gameover-title">¡Juego Terminado!</h2>
            <div class="final-stats">
                <p class="final-distance">
                    Distancia: <span id="final-distance-value">0</span>m
                </p>
                <p id="new-record-message" class="new-record hidden">
                    ¡Nuevo Récord!
                </p>
            </div>
            <nav class="gameover-nav" role="navigation">
                <button id="play-again-btn" class="sp-btn sp-btn--primary">
                    Intentar de Nuevo
                </button>
                <button id="gameover-menu-btn" class="sp-btn sp-btn--secondary">
                    Volver al Menú
                </button>
            </nav>
        </div>
    </div>

    <!-- Pantalla de récords -->
    <div id="records-screen" class="sp-screen sp-screen--records hidden" role="main" aria-labelledby="records-title">
        <div class="records-content">
            <h2 id="records-title" class="records-title">Récords</h2>
            <div class="records-stats">
                <div class="record-item">
                    <span class="record-label">Mejor Distancia</span>
                    <span class="record-value" id="best-distance-record">0m</span>
                </div>
                <div class="record-item">
                    <span class="record-label">Partidas Jugadas</span>
                    <span class="record-value" id="games-played-record">0</span>
                </div>
                <div class="record-item">
                    <span class="record-label">Tiempo Total</span>
                    <span class="record-value" id="total-time-record">0min</span>
                </div>
            </div>
            <nav class="records-nav" role="navigation">
                <button id="records-back-btn" class="sp-btn sp-btn--secondary">
                    Volver
                </button>
            </nav>
        </div>
    </div>

    <!-- Pantalla de configuración -->
    <div id="settings-screen" class="sp-screen sp-screen--settings hidden" role="main" aria-labelledby="settings-title">
        <div class="settings-content">
            <h2 id="settings-title" class="settings-title">Configuración</h2>
            <form class="settings-form" role="form">
                <fieldset class="settings-group">
                    <legend>Gráficos</legend>
                    <label class="setting-item">
                        <input type="checkbox" id="show-fps-setting" name="showFPS">
                        <span class="setting-label">Mostrar FPS</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="enable-effects-setting" name="enableEffects" checked>
                        <span class="setting-label">Efectos Visuales</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="enable-particles-setting" name="enableParticles" checked>
                        <span class="setting-label">Partículas</span>
                    </label>
                </fieldset>
                
                <fieldset class="settings-group">
                    <legend>Audio</legend>
                    <label class="setting-item">
                        <input type="checkbox" id="enable-sound-setting" name="enableSound" checked>
                        <span class="setting-label">Efectos de Sonido</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="enable-music-setting" name="enableMusic" checked>
                        <span class="setting-label">Música</span>
                    </label>
                </fieldset>
                
                <fieldset class="settings-group">
                    <legend>Accesibilidad</legend>
                    <label class="setting-item">
                        <input type="checkbox" id="high-contrast-setting" name="highContrast">
                        <span class="setting-label">Alto Contraste</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="reduced-motion-setting" name="reducedMotion">
                        <span class="setting-label">Reducir Animaciones</span>
                    </label>
                </fieldset>
            </form>
            <nav class="settings-nav" role="navigation">
                <button id="settings-back-btn" class="sp-btn sp-btn--secondary">
                    Volver
                </button>
            </nav>
        </div>
    </div>

    <!-- Instrucciones de controles -->
    <div id="controls-help" class="controls-help hidden" role="complementary" aria-label="Instrucciones de controles">
        <div class="controls-content">
            <h3>Controles</h3>
            <ul class="controls-list">
                <li><kbd>Espacio</kbd> o <kbd>Clic</kbd> - Saltar</li>
                <li><kbd>Shift</kbd> - Dash</li>
                <li><kbd>Ctrl</kbd> - Cambiar Gravedad</li>
                <li><kbd>Escape</kbd> - Pausar</li>
            </ul>
        </div>
    </div>

    <!-- Región para anuncios de accesibilidad -->
    <div id="accessibility-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>

    <!-- Scripts del juego -->
    <script type="module" src="src/main.js"></script>
    
    <!-- Script de fallback para navegadores sin soporte ES6 modules -->
    <script nomodule>
        document.body.innerHTML = `
            <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #000; color: #fff; font-family: Arial, sans-serif; text-align: center;">
                <div>
                    <h1>Navegador No Compatible</h1>
                    <p>Tu navegador no soporta las características necesarias para ejecutar Spikepulse.</p>
                    <p>Por favor actualiza tu navegador o usa uno más moderno como Chrome, Firefox, Safari o Edge.</p>
                </div>
            </div>
        `;
    </script>
</body>
</html>